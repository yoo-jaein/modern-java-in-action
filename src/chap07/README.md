# Chapter 07 병렬 데이터 처리와 성능

## 병렬 스트림
- parallelStream을 호출하면 병렬 스트림(parallel stream)이 생성된다.
- 병렬 스트림이란 각각의 스레드에서 처리할 수 있도록 스트림 요소를 여러 청크로 분할한 스트림이다.
- 병렬 스트림을 이용하면 모든 멀티코어 프로세스가 각각의 청크를 처리하도록 할당할 수 있다.
- 처리해야 할 데이터가 아주 많거나 각 요소를 처리하는 데 오랜 시간이 걸릴 때 성능을 높일 수 있다.

## JMH로 스트림 성능 측정하기
- Java Microbenchmark Harness(JMH)
- 항상 병렬 처리가 빠른 것은 아니다. 병렬 처리를 사용했을 때 성능을 직접 측정해봐야 한다.

## 병렬 스트림 효과적으로 사용하기
1. 무조건 병렬 스트림이 순차 스트림보다 빠른 것은 아니다.
2. 박싱을 주의하라. 자동 박싱/언박싱은 성능을 크게 저하시킬 수 있는 요소다.
3. 순차 스트림보다 병렬 스트림에서 성능이 떨어지는 연산이 있다.
4. 소량의 데이터에서는 병렬 스트림이 도움 되지 않는다.
5. 스트림을 구성하는 자료구조가 적절한지 확인하자.
6. 중간 연산에 따라 성능이 달라질 수 있다.
7. 최종 연산의 병합 과정이 비쌀 수 있다.

## 포크/조인 프레임워크
포크/조인 프레임워크는 병렬화할 수 있는 작업을 재귀적으로 작은 작업으로 분할한 다음에 서브태스크 각각의 결과를 합쳐서 전체 결과를 만들도록 설계되었다.
